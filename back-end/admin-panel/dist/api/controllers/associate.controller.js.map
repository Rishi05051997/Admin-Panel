{"version":3,"sources":["../../../src/api/controllers/associate.controller.js"],"names":["Joi","require","associates","_id","item","qty","date","Date","finadAll","req","res","next","Associate","find","then","json","create","schema","object","keys","string","required","number","integer","due","tax","optional","rate","validate","body","error","value","details","status","associate","catch","err"],"mappings":";;;;;;AAAA;;;;;;AACA,IAAMA,MAAMC,QAAQ,KAAR,CAAZ;AACA,IAAMC,aAAa,CACf;AACIC,SAAK,GADT;AAEIC,UAAK,QAFT;AAGIC,SAAK,EAHT;AAIIC,UAAM,IAAIC,IAAJ;;AAJV,CADe,EAQf;AACIJ,SAAK,GADT;AAEIC,UAAK,QAFT;AAGIC,SAAK,EAHT;AAIIC,UAAM,IAAIC,IAAJ;;AAJV,CARe,EAef;AACIJ,SAAK,GADT;AAEIC,UAAK,QAFT;AAGIC,SAAK,EAHT;AAIIC,UAAM,IAAIC,IAAJ;;AAJV,CAfe,CAAnB;;kBAwBe;AACXC,YADW,oBACFC,GADE,EACGC,GADH,EACQC,IADR,EACc;AACrB;AACAC,4BAAUC,IAAV,GAAiBC,IAAjB,CAAuB;AAAA,mBAAcJ,IAAIK,IAAJ,CAASb,UAAT,CAAd;AAAA,SAAvB;AACH,KAJU;AAKXc,UALW,kBAKJP,GALI,EAKCC,GALD,EAKM;AACb;AACA,YAAMO,SAASjB,IAAIkB,MAAJ,GAAaC,IAAb,CAAkB;AAC7Bf,kBAAOJ,IAAIoB,MAAJ,GAAaC,QAAb,EADsB;AAE7Bf,kBAAMN,IAAIM,IAAJ,GAAWe,QAAX,EAFuB;AAG7BhB,iBAAKL,IAAIsB,MAAJ,GAAaC,OAAb,GAAuBF,QAAvB,EAHwB;AAI7BG,iBAAKxB,IAAIM,IAAJ,GAAWe,QAAX,EAJwB;AAK7BI,iBAAKzB,IAAIsB,MAAJ,GAAaC,OAAb,GAAuBG,QAAvB,EALwB;AAM7BC,kBAAM3B,IAAIsB,MAAJ,GAAaI,QAAb;;AANuB,SAAlB,CAAf;;AAFa,4BAYW1B,IAAI4B,QAAJ,CAAanB,IAAIoB,IAAjB,EAAuBZ,MAAvB,CAZX;AAAA,YAYLa,KAZK,iBAYLA,KAZK;AAAA,YAYEC,KAZF,iBAYEA,KAZF;;AAab,YAAGD,SAASA,MAAME,OAAlB,EAA2B;AACvB,mBAAOtB,IAAIuB,MAAJ,CAAW,GAAX,EAAgBlB,IAAhB,CAAqBe,KAArB,CAAP;AACH;AACDlB,4BAAUI,MAAV,CAAiBe,KAAjB,EACCjB,IADD,CACO,qBAAa;AAChBJ,gBAAIK,IAAJ,CAASmB,SAAT;AACH,SAHD,EAICC,KAJD,CAIO;AAAA,mBAAOzB,IAAIuB,MAAJ,CAAW,GAAX,EAAgBlB,IAAhB,CAAqBqB,GAArB,CAAP;AAAA,SAJP;AAMH;AA3BU,C","file":"associate.controller.js","sourcesContent":["import Associate from '../models/associate.model'\r\nconst Joi = require('Joi');\r\nconst associates = [\r\n    {\r\n        _id: \"1\", \r\n        item:\"Amazon\",\r\n        qty: 10,\r\n        date: new Date(),\r\n\r\n    },\r\n    {\r\n        _id: \"1\", \r\n        item:\"Amazon\",\r\n        qty: 10,\r\n        date: new Date(),\r\n\r\n    },\r\n    {\r\n        _id: \"1\", \r\n        item:\"Amazon\",\r\n        qty: 10,\r\n        date: new Date(),\r\n\r\n    },\r\n];\r\n\r\nexport default {\r\n    finadAll(req, res, next) {\r\n        // res.json(associates);\r\n        Associate.find().then( associates => res.json(associates))\r\n    },\r\n    create(req, res) {\r\n        // const {item, qty, date, due, tax, rate} = req.body;\r\n        const schema = Joi.object().keys({\r\n            item : Joi.string().required(),\r\n            date: Joi.date().required(),\r\n            qty: Joi.number().integer().required(),\r\n            due: Joi.date().required(),\r\n            tax: Joi.number().integer().optional(),\r\n            rate: Joi.number().optional()\r\n\r\n\r\n        })\r\n        const { error, value} = Joi.validate(req.body, schema);\r\n        if(error && error.details) {\r\n            return res.status(400).json(error);\r\n        }\r\n        Associate.create(value)\r\n        .then( associate => {\r\n            res.json(associate);\r\n        })\r\n        .catch(err => res.status(500).json(err));\r\n\r\n    },\r\n};"]}